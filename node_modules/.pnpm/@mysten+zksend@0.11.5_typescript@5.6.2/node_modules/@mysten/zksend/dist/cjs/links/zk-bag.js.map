{
  "version": 3,
  "sources": ["../../../src/links/zk-bag.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { Argument, Transaction, TransactionObjectArgument } from '@mysten/sui/transactions';\n\nexport interface ZkBagContractOptions {\n\tpackageId: string;\n\tbagStoreId: string;\n\tbagStoreTableId: string;\n}\n\nexport const TESTNET_CONTRACT_IDS: ZkBagContractOptions = {\n\tpackageId: '0x036fee67274d0d85c3532f58296abe0dee86b93864f1b2b9074be6adb388f138',\n\tbagStoreId: '0x5c63e71734c82c48a3cb9124c54001d1a09736cfb1668b3b30cd92a96dd4d0ce',\n\tbagStoreTableId: '0x4e1bc4085d64005e03eb4eab2510d527aeba9548cda431cb8f149ff37451f870',\n};\n\nexport const MAINNET_CONTRACT_IDS: ZkBagContractOptions = {\n\tpackageId: '0x5bb7d0bb3240011336ca9015f553b2646302a4f05f821160344e9ec5a988f740',\n\tbagStoreId: '0x65b215a3f2a951c94313a89c43f0adbd2fd9ea78a0badf81e27d1c9868a8b6fe',\n\tbagStoreTableId: '0x616db54ca564660cd58e36a4548be68b289371ef2611485c62c374a60960084e',\n};\n\nexport function getContractIds(network?: 'mainnet' | 'testnet') {\n\tif (!network) {\n\t\treturn MAINNET_CONTRACT_IDS;\n\t}\n\n\treturn network === 'mainnet' ? MAINNET_CONTRACT_IDS : TESTNET_CONTRACT_IDS;\n}\n\nexport class ZkBag<IDs> {\n\t#package: string;\n\t#module = 'zk_bag' as const;\n\tids: IDs;\n\n\tconstructor(packageAddress: string, ids: IDs) {\n\t\tthis.#package = packageAddress;\n\t\tthis.ids = ids;\n\t}\n\n\tnew({\n\t\targuments: [store, receiver],\n\t}: {\n\t\targuments: [store: TransactionObjectArgument | string, receiver: Argument | string];\n\t}) {\n\t\treturn (tx: Transaction) => {\n\t\t\ttx.moveCall({\n\t\t\t\ttarget: `${this.#package}::${this.#module}::new`,\n\t\t\t\targuments: [\n\t\t\t\t\ttx.object(store),\n\t\t\t\t\ttypeof receiver === 'string' ? tx.pure.address(receiver) : receiver,\n\t\t\t\t],\n\t\t\t});\n\t\t};\n\t}\n\n\tadd({\n\t\targuments: [store, receiver, item],\n\t\ttypeArguments,\n\t}: {\n\t\targuments: [\n\t\t\tstore: TransactionObjectArgument | string,\n\t\t\treceiver: Argument | string,\n\t\t\titem: TransactionObjectArgument | string,\n\t\t];\n\t\ttypeArguments: [string];\n\t}): (tx: Transaction) => Extract<Argument, { $kind: 'Result' }> {\n\t\treturn (tx: Transaction) =>\n\t\t\ttx.moveCall({\n\t\t\t\ttarget: `${this.#package}::${this.#module}::add`,\n\t\t\t\targuments: [\n\t\t\t\t\ttx.object(store),\n\t\t\t\t\ttypeof receiver === 'string' ? tx.pure.address(receiver) : receiver,\n\t\t\t\t\ttx.object(item),\n\t\t\t\t],\n\t\t\t\ttypeArguments: typeArguments,\n\t\t\t});\n\t}\n\n\tinit_claim({ arguments: [store] }: { arguments: [store: TransactionObjectArgument | string] }) {\n\t\treturn (tx: Transaction) => {\n\t\t\tconst [bag, claimProof] = tx.moveCall({\n\t\t\t\ttarget: `${this.#package}::${this.#module}::init_claim`,\n\t\t\t\targuments: [tx.object(store)],\n\t\t\t});\n\n\t\t\treturn [bag, claimProof] as const;\n\t\t};\n\t}\n\n\treclaim({\n\t\targuments: [store, receiver],\n\t}: {\n\t\targuments: [store: TransactionObjectArgument | string, receiver: Argument | string];\n\t}) {\n\t\treturn (tx: Transaction) => {\n\t\t\tconst [bag, claimProof] = tx.moveCall({\n\t\t\t\ttarget: `${this.#package}::${this.#module}::reclaim`,\n\t\t\t\targuments: [\n\t\t\t\t\ttx.object(store),\n\t\t\t\t\ttypeof receiver === 'string' ? tx.pure.address(receiver) : receiver,\n\t\t\t\t],\n\t\t\t});\n\n\t\t\treturn [bag, claimProof] as const;\n\t\t};\n\t}\n\n\tclaim({\n\t\targuments: [bag, claim, id],\n\t\ttypeArguments,\n\t}: {\n\t\targuments: [\n\t\t\tbag: TransactionObjectArgument | string,\n\t\t\tclaim: Extract<Argument, { $kind: 'NestedResult' }>,\n\t\t\tid: TransactionObjectArgument | string,\n\t\t];\n\t\ttypeArguments: [string];\n\t}): (tx: Transaction) => Extract<Argument, { $kind: 'Result' }> {\n\t\treturn (tx: Transaction) =>\n\t\t\ttx.moveCall({\n\t\t\t\ttarget: `${this.#package}::${this.#module}::claim`,\n\t\t\t\targuments: [tx.object(bag), tx.object(claim), typeof id === 'string' ? tx.object(id) : id],\n\t\t\t\ttypeArguments,\n\t\t\t});\n\t}\n\n\tfinalize({\n\t\targuments: [bag, claim],\n\t}: {\n\t\targuments: [\n\t\t\tbag: TransactionObjectArgument | string,\n\t\t\tclaim: Extract<Argument, { $kind: 'NestedResult' }>,\n\t\t];\n\t}) {\n\t\treturn (tx: Transaction) => {\n\t\t\ttx.moveCall({\n\t\t\t\ttarget: `${this.#package}::${this.#module}::finalize`,\n\t\t\t\targuments: [tx.object(bag), tx.object(claim)],\n\t\t\t});\n\t\t};\n\t}\n\n\tupdate_receiver({\n\t\targuments: [bag, from, to],\n\t}: {\n\t\targuments: [\n\t\t\tbag: TransactionObjectArgument | string,\n\t\t\tfrom: Argument | string,\n\t\t\tto: Argument | string,\n\t\t];\n\t}) {\n\t\treturn (tx: Transaction) => {\n\t\t\ttx.moveCall({\n\t\t\t\ttarget: `${this.#package}::${this.#module}::update_receiver`,\n\t\t\t\targuments: [\n\t\t\t\t\ttx.object(bag),\n\t\t\t\t\ttypeof from === 'string' ? tx.pure.address(from) : from,\n\t\t\t\t\ttypeof to === 'string' ? tx.pure.address(to) : to,\n\t\t\t\t],\n\t\t\t});\n\t\t};\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
